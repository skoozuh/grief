<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>grief.bio — your dark biolink hub</title>
  <meta name="description" content="grief.bio — sleek, modern biolink frontpage" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!--
    grief.bio — single-file modern frontpage
    - Dark, sleek, floating card
    - Neon accents, particles, animated blobs
    - Vanity username preview / sign-up mock
    - Accessible and keyboard-friendly
  -->

  <style>
    /* ----------------------------------------------
       Variables & Reset
       ---------------------------------------------- */
    :root{
      --bg:#060608;
      --panel: rgba(18,18,20,0.6);
      --glass: rgba(255,255,255,0.03);
      --accent1: #7c3aed; /* deep neon purple */
      --accent2: #06b6d4; /* cyan */
      --accent3: #ef4444; /* red for alerts */
      --muted: #9aa4b2;
      --text: #eef2ff;
      --radius: 14px;
      --outline: 2px solid rgba(124,58,237,0.12);
      --card-width: 420px;
      --max-width: 1000px;
      --glass-border: 1px solid rgba(255,255,255,0.04);
      --shadow: 0 10px 30px rgba(2,6,23,0.65);
      --glass-glow: 0 0 40px rgba(124,58,237,0.08);
      --ease: cubic-bezier(.16,.84,.44,1);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      padding:0;
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background: radial-gradient(1200px 700px at 10% 10%, rgba(124,58,237,0.07), transparent 8%),
                  radial-gradient(900px 500px at 95% 90%, rgba(6,182,212,0.04), transparent 8%),
                  var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px;
    }

    /* ----------------------------------------------
       Page container — modern centered layout
       ---------------------------------------------- */
    .wrap{
      width:100%;
      max-width:var(--max-width);
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:36px;
      align-items:center;
      position:relative;
      z-index:5;
      margin:0 auto;
    }

    /* Mobile stack */
    @media (max-width:920px){
      .wrap{grid-template-columns:1fr; padding:0 16px}
    }

    /* ----------------------------------------------
       Left content — description, links, feed
       ---------------------------------------------- */
    .left {
      padding:28px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
      border-radius: 16px;
      border: var(--glass-border);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px) saturate(120%);
      position:relative;
      overflow:hidden;
      min-height:520px;
    }

    .left .brand {
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:18px;
    }

    .logo {
      width:72px;
      height:72px;
      border-radius:14px;
      display:grid;
      place-items:center;
      background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.04);
      box-shadow: 0 6px 24px rgba(12,12,18,0.6), 0 0 30px rgba(124,58,237,0.06) inset;
      position:relative;
    }

    /* small cat icon (KITH theme nod) */
    .logo svg{width:46px;height:46px;filter:drop-shadow(0 6px 14px rgba(124,58,237,0.14))}

    .brand h2{
      font-size:1.6rem;
      line-height:1;
      margin:0;
      letter-spacing:-0.6px;
      font-weight:800;
      background: linear-gradient(90deg,var(--accent1),var(--accent2));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }

    .brand p{margin:0;color:var(--muted);font-weight:500;font-size:0.95rem}

    .desc {
      margin-top:12px;
      color:var(--muted);
      font-size:0.96rem;
      line-height:1.5;
    }

    /* ----------------------------------------------
       Link list (left panel)
       ---------------------------------------------- */
    .link-grid{
      margin-top:22px;
      display:flex;
      flex-wrap:wrap;
      gap:12px;
    }

    .big-link{
      flex: 1 1 160px;
      min-width:140px;
      display:block;
      padding:12px 14px;
      border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      border: 1px solid rgba(255,255,255,0.03);
      color:var(--text);
      text-decoration:none;
      font-weight:600;
      font-size:0.95rem;
      transition:transform .22s var(--ease), box-shadow .22s var(--ease);
      box-shadow: 0 6px 18px rgba(2,6,23,0.35);
      display:flex;
      gap:10px;
      align-items:center;
    }

    .big-link:hover{
      transform: translateY(-6px);
      box-shadow: 0 18px 40px rgba(6,182,212,0.06);
    }

    .big-link svg{width:20px;height:20px;opacity:0.95}

    /* ----------------------------------------------
       Right card — user identity & vanity preview
       ---------------------------------------------- */
    .right {
      width:100%;
      max-width:var(--card-width);
      align-self:start;
    }

    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius: var(--radius);
      padding:22px;
      border: var(--glass-border);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px) saturate(120%);
      position:relative;
      overflow:visible;
    }

    .avatar {
      width:92px;
      height:92px;
      border-radius:18px;
      display:grid;
      place-items:center;
      margin:0 auto;
      margin-top:-64px;
      background: linear-gradient(135deg, rgba(124,58,237,0.12), rgba(6,182,212,0.06));
      border:1px solid rgba(255,255,255,0.04);
      box-shadow: 0 10px 30px rgba(12,12,18,0.6);
    }

    .user-name{
      text-align:center;
      margin-top:10px;
    }

    .user-name h3{
      margin:6px 0 0 0;
      font-weight:800;
      font-size:1.5rem;
      letter-spacing:-0.6px;
    }

    .user-name p{
      margin:6px 0 0 0;
      color:var(--muted);
      font-size:0.9rem;
      font-weight:600;
    }

    /* Vanity name preview */
    .vanity {
      margin-top:14px;
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
    }

    .vanity input[type="text"]{
      background:transparent;
      border:1px dashed rgba(255,255,255,0.04);
      padding:10px 12px;
      border-radius:10px;
      color:var(--text);
      font-weight:600;
      min-width:160px;
      outline:none;
      transition: box-shadow .18s var(--ease), transform .18s var(--ease);
    }

    .vanity input[type="text"]:focus{
      box-shadow: 0 10px 30px rgba(124,58,237,0.09);
      transform:translateY(-3px);
      border:1px solid rgba(124,58,237,0.22);
    }

    .vanity .preview {
      padding:10px 12px;
      border-radius:10px;
      background: linear-gradient(90deg, rgba(124,58,237,0.06), rgba(6,182,212,0.03));
      font-weight:700;
      color:var(--text);
      font-size:0.95rem;
      min-width:140px;
      text-align:center;
    }

    /* Buttons */
    .actions{
      display:flex;
      gap:10px;
      margin-top:18px;
      justify-content:center;
      flex-wrap:wrap;
    }

    .btn {
      padding:10px 14px;
      border-radius:12px;
      text-decoration:none;
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-weight:700;
      cursor:pointer;
      border: none;
      transition: transform .14s var(--ease), box-shadow .14s var(--ease);
    }

    .btn-primary{
      background: linear-gradient(90deg,var(--accent1),var(--accent2));
      color:white;
      box-shadow: 0 8px 30px rgba(124,58,237,0.12);
    }

    .btn-ghost{
      background:transparent;
      border:1px solid rgba(255,255,255,0.04);
      color:var(--text);
    }

    .btn:active{transform:translateY(1px)}

    /* Link list in card */
    .card-links{
      margin-top:18px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .card-links a{
      display:flex;
      gap:10px;
      align-items:center;
      padding:10px 12px;
      border-radius:10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
      color:var(--text);
      text-decoration:none;
      border:1px solid rgba(255,255,255,0.03);
      transition: transform .16s var(--ease), box-shadow .16s var(--ease);
    }

    .card-links a:hover{
      transform: translateY(-6px);
      box-shadow: 0 12px 30px rgba(6,182,212,0.05);
    }

    /* Footer and legal */
    .meta{
      margin-top:18px;
      font-size:0.84rem;
      color:var(--muted);
      text-align:center;
    }

    /* small utility row (sound toggle, copy link) */
    .util-row { display:flex; gap:8px; justify-content:center; margin-top:12px; }

    .icon-button{
      width:40px;height:40px;border-radius:10px;
      border:1px solid rgba(255,255,255,0.03);
      display:grid;place-items:center;background:transparent;
      cursor:pointer;
    }

    /* ----------------------------------------------
       Background visual elements: particles, blobs
       ---------------------------------------------- */
    .bg-canvas {
      position:fixed;
      inset:0;
      z-index:1;
      pointer-events:none;
    }

    .blob {
      position: absolute;
      filter: blur(50px);
      opacity:0.7;
      transform: translate3d(0,0,0);
      will-change: transform, opacity;
    }

    .blob.one{ width:420px; height:420px; left:-10%; top:-8%; background: radial-gradient(circle at 30% 40%, rgba(124,58,237,0.28), rgba(124,58,237,0.06) 35%, transparent 60%); }
    .blob.two{ width:320px; height:320px; right:-8%; bottom:-6%; background: radial-gradient(circle at 30% 40%, rgba(6,182,212,0.22), rgba(6,182,212,0.05) 35%, transparent 60%); }

    /* Particle dots for subtle motion */
    .particles { position:absolute; inset:0; z-index:2; pointer-events:none; opacity:0.6; }

    /* ----------------------------------------------
       Accessibility helpers
       ---------------------------------------------- */
    .sr-only{ position:absolute; clip:rect(1px,1px,1px,1px); width:1px; height:1px; overflow:hidden; white-space:nowrap; }
    
    /* Tiny responsive tweaks */
    @media (max-width:560px){
      .avatar{width:82px;height:82px;margin-top:-52px}
      .brand h2{font-size:1.25rem}
      .left{min-height:calc(100vh - 120px); padding:18px}
    }

  </style>
</head>
<body>
  <!-- Background visuals -->
  <div class="bg-canvas" aria-hidden="true">
    <div class="blob one" style="transform:translate3d(0,0,0)"></div>
    <div class="blob two"></div>
    <svg class="particles" width="100%" height="100%" preserveAspectRatio="none">
      <!-- small dots drawn via JS for performance -->
      <defs><radialGradient id="g1"><stop offset="0%" stop-color="#ffffff" stop-opacity="0.08" /><stop offset="100%" stop-color="#ffffff" stop-opacity="0" /></radialGradient></defs>
    </svg>
  </div>

  <main class="wrap" role="main" aria-labelledby="site-title">

    <!-- LEFT COLUMN -->
    <section class="left" aria-labelledby="about-heading">
      <header class="brand" role="banner">
        <figure class="logo" aria-hidden="true">
          <!-- expressive cat by simple SVG, nod to KITH coin -->
          <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="grief logo">
            <rect width="64" height="64" rx="12" fill="url(#lg)"></rect>
            <defs>
              <linearGradient id="lg" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#7c3aed"/>
                <stop offset="1" stop-color="#06b6d4"/>
              </linearGradient>
            </defs>
            <g transform="translate(8 10)" fill="#fff" opacity="0.95">
              <path d="M24 0C18.477 0 14 4.477 14 10s4.477 10 10 10 10-4.477 10-10S29.523 0 24 0z" fill="white" opacity="0.06"/>
              <path d="M26 3c-1.657 0-3 1.343-3 3 0 1.1.57 2.06 1.44 2.61C21.94 10.77 20 13.86 20 17.6V22c0 .55.45 1 1 1h8c.55 0 1-.45 1-1v-4.4c0-3.74-1.94-6.83-4.44-8 - .87-.55-1.44-1.51-1.44-2.61 0-1.657-1.343-3-3-3z" />
            </g>
          </svg>
        </figure>

        <div>
          <h2 id="site-title">grief.bio</h2>
          <p>dark • minimal • neon</p>
        </div>
      </header>

      <h3 id="about-heading" style="margin-top:16px; font-size:1.05rem; color:var(--muted)">more than a link — a mood</h3>
      <p class="desc">
        Make your digital identity lean and brutal in the best way. Clean vanity URLs, embeddable widgets, and custom calls-to-action — all in a single clean card.
        Perfect for artists, producers, creators, or those who just prefer the shadows.
      </p>

      <nav class="link-grid" aria-label="Primary Links">
        <a class="big-link" href="#" aria-label="Instagram link">
          <svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="white" stroke-opacity="0.7" stroke-width="1.2"/></svg>
          Instagram
        </a>
        <a class="big-link" href="#" aria-label="Twitter link">
          <svg viewBox="0 0 24 24" fill="none"><path d="M4 20c7.333 0 11.333-6.333 11.333-11.333v-.52A8.093 8.093 0 0018 7" stroke="white" stroke-opacity="0.7" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Twitter
        </a>
        <a class="big-link" href="#" aria-label="Discord link">
          <svg viewBox="0 0 24 24"><rect width="20" height="12" rx="6" transform="translate(2 6)" stroke="white" stroke-opacity="0.7" fill="none" stroke-width="1.2"/></svg>
          Discord
        </a>
        <a class="big-link" href="#" aria-label="Shop link">
          <svg viewBox="0 0 24 24" fill="none"><path d="M3 6h18M7 6l1 11h8l1-11" stroke="white" stroke-opacity="0.7" stroke-width="1.2"/></svg>
          Shop
        </a>
      </nav>

      <!-- subtle divider -->
      <div style="height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.02),transparent);margin:20px 0;border-radius:4px"></div>

      <!-- small embed mock (replace with real iframe if needed) -->
      <section aria-labelledby="embed-title">
        <h4 id="embed-title" style="font-size:0.95rem;margin:0 0 10px 0;color:var(--muted)">quick embed</h4>
        <div style="border-radius:12px;padding:12px;border:var(--glass-border);background:rgba(255,255,255,0.01);">
          <p style="margin:0;color:var(--muted);font-size:0.92rem">Preview — embed your latest track, post, or playlist here. Paste an iframe or link in the admin to show.</p>
          <div style="margin-top:12px;display:flex;gap:8px">
            <div style="flex:1;padding:8px;border-radius:8px;background:linear-gradient(90deg,rgba(124,58,237,0.03),transparent)">
              <small style="color:var(--muted)">Music • Spotify</small>
              <div style="height:44px;margin-top:8px;border-radius:8px;background:linear-gradient(90deg,rgba(0,0,0,0.3),transparent);display:flex;align-items:center;justify-content:center;color:var(--muted)">Preview Player</div>
            </div>
            <div style="width:120px;padding:8px;border-radius:8px;background:linear-gradient(90deg,rgba(6,182,212,0.03),transparent);text-align:center">
              <small style="color:var(--muted)">Followers</small>
              <div style="margin-top:8px;font-weight:800;font-size:1.05rem">12.3k</div>
            </div>
          </div>
        </div>
      </section>

      <div style="margin-top:20px;display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn btn-ghost" id="copyBtn" title="Copy grief.bio/yourname">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M9 12H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v4" stroke="white" stroke-opacity="0.9" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Copy Link
        </button>

        <button class="btn btn-ghost" id="shareBtn" title="Share">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7" stroke="white" stroke-opacity="0.9" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 3v13" stroke="white" stroke-opacity="0.9" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Share
        </button>

        <button class="btn btn-ghost" id="themeBtn" title="Toggle Theme Sound">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M12 3v3M12 18v3M5 6.2l2 1.2M17 16.6l2 1.2M3 12h3M18 12h3" stroke="white" stroke-opacity="0.8" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Sound
        </button>
      </div>

      <p style="margin-top:18px;color:var(--muted);font-size:0.9rem">Tip: press <kbd style="background:#0b0b0d;border-radius:4px;padding:3px 6px;font-weight:700">/</kbd> to quickly focus the vanity input.</p>
    </section>

    <!-- RIGHT CARD -->
    <aside class="right" aria-label="Profile card">
      <div class="card" role="region" aria-labelledby="profile-name">
        <div class="avatar" aria-hidden="true">
          <!-- svg avatar -->
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
            <circle cx="32" cy="32" r="30" fill="url(#avGrad)"/>
            <defs>
              <linearGradient id="avGrad" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#7c3aed"/>
                <stop offset="1" stop-color="#06b6d4"/>
              </linearGradient>
            </defs>
            <g opacity="0.95" fill="#fff">
              <path d="M22 38c0-6 10-10 10-10s10 4 10 10v6H22v-6z" opacity="0.25"/>
            </g>
          </svg>
        </div>

        <div class="user-name" id="profile-name">
          <h3 id="displayName">skoo</h3>
          <p>producer • haunt aesthetic</p>
        </div>

        <div class="vanity" aria-hidden="false">
          <label class="sr-only" for="vanityInput">Enter vanity username</label>
          <input id="vanityInput" type="text" maxlength="24" placeholder="yourname" value="skoo" aria-label="vanity username"/>
          <div class="preview" id="vanityPreview">grief.bio/skoo</div>
        </div>

        <div class="actions" role="group" aria-label="Primary actions">
          <button class="btn btn-primary" id="claimBtn" title="Claim username">Claim</button>
          <button class="btn btn-ghost" id="customizeBtn" title="Customize page">Customize</button>
        </div>

        <div class="card-links" role="navigation" aria-label="Quick links">
          <a href="#" tabindex="0"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 12h18" stroke="white" stroke-opacity="0.85" stroke-width="1.4" stroke-linecap="round"/></svg> Latest release</a>
          <a href="#" tabindex="0"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 3v18" stroke="white" stroke-opacity="0.85" stroke-width="1.4" stroke-linecap="round"/></svg> About / bio</a>
          <a href="#" tabindex="0"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="white" stroke-opacity="0.85" stroke-width="1.4"/></svg> Contact</a>
        </div>

        <div class="meta">
          <div class="util-row">
            <button class="icon-button" id="playTone" aria-pressed="false" title="Play sample tone">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M5 18L19 12 5 6v12z" stroke="white" stroke-opacity="0.9" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>

            <button class="icon-button" id="openModal" title="Open signup modal">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M12 2v20M2 12h20" stroke="white" stroke-opacity="0.9" stroke-width="1.2" stroke-linecap="round"/></svg>
            </button>
          </div>

          <p style="margin-top:8px">© <span id="year"></span> grief.bio — built with dark energy</p>
        </div>
      </div>
    </aside>

  </main>

  <!-- Modal (signup) -->
  <div id="modal" role="dialog" aria-modal="true" aria-hidden="true" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:60;">
    <div style="position:absolute;inset:0;background:linear-gradient(0deg,rgba(0,0,0,0.6),rgba(0,0,0,0.6));backdrop-filter:blur(2px)"></div>
    <div style="width:420px;max-width:92%;border-radius:12px;z-index:65;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:18px;border:var(--glass-border)">
      <h3 style="margin:0 0 8px 0">Claim your vanity</h3>
      <p style="margin:0 0 12px 0;color:var(--muted)">Claim a short grief.bio/username — this is a mock form (implement backend to persist).</p>
      <div style="display:flex;gap:8px">
        <input id="modalInput" placeholder="yourname" style="flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);outline:none" />
        <button id="modalClaim" class="btn btn-primary">Claim</button>
      </div>
      <div style="margin-top:10px;text-align:right">
        <button id="modalClose" class="btn btn-ghost">Close</button>
      </div>
    </div>
  </div>

  <!-- Tiny inline JS for interactions + particles -->
  <script>
    /* ----------------------------------------------
       Utilities & tiny DOM selection
       ---------------------------------------------- */
    const vanityInput = document.getElementById('vanityInput');
    const vanityPreview = document.getElementById('vanityPreview');
    const displayName = document.getElementById('displayName');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const themeBtn = document.getElementById('themeBtn');
    const claimBtn = document.getElementById('claimBtn');
    const customizeBtn = document.getElementById('customizeBtn');
    const openModal = document.getElementById('openModal');
    const modal = document.getElementById('modal');
    const modalClose = document.getElementById('modalClose');
    const modalClaim = document.getElementById('modalClaim');
    const modalInput = document.getElementById('modalInput');
    const yearSpan = document.getElementById('year');

    yearSpan.textContent = new Date().getFullYear();

    /* ----------------------------------------------
       Vanity name live preview & sanitization
       ---------------------------------------------- */
    function sanitizeUsername(s){
      // lowercase, allow letters, numbers, underscore, dash; trim to 24 chars
      return String(s || '').toLowerCase().replace(/[^a-z0-9-_]/g,'').slice(0,24);
    }

    function updateVanityPreview(){
      const val = sanitizeUsername(vanityInput.value.trim());
      vanityPreview.textContent = val ? `grief.bio/${val}` : 'grief.bio/yourname';
      displayName.textContent = val || 'yourname';
    }

    vanityInput.addEventListener('input', updateVanityPreview);
    vanityInput.addEventListener('keydown', (e) => {
      if(e.key === 'Enter'){ claimMock(); }
    });

    /* ----------------------------------------------
       Claim mock (no backend) — short visual confirmation
       ---------------------------------------------- */
    function claimMock(){
      const name = sanitizeUsername(vanityInput.value.trim());
      if(!name){ flashMessage('Pick a username first', true); return; }
      flashMessage(`Nice. ${name} is yours (mock).`, false);
      // subtle pulse
      claimBtn.animate([{transform:'scale(1.02)'},{transform:'scale(1)'}],{duration:240,easing:'ease-out'});
    }

    claimBtn.addEventListener('click', claimMock);

    /* ----------------------------------------------
       Copy link action
       ---------------------------------------------- */
    copyBtn.addEventListener('click', async ()=>{
      const text = vanityPreview.textContent || 'grief.bio';
      try {
        await navigator.clipboard.writeText(text);
        flashMessage('Link copied to clipboard');
      } catch(e){
        flashMessage('Copy failed — try manually', true);
      }
    });

    /* ----------------------------------------------
       Share action (Web Share API fallback)
       ---------------------------------------------- */
    shareBtn.addEventListener('click', async () => {
      const href = vanityPreview.textContent || 'grief.bio';
      if(navigator.share){
        try{
          await navigator.share({title:'grief.bio',text:'Check my page',url:href});
          flashMessage('Shared!');
        }catch(e){
          flashMessage('Share cancelled', true);
        }
      } else {
        // fallback: copy
        try{ await navigator.clipboard.writeText(href); flashMessage('Share link copied'); } catch(e){ flashMessage('Share not supported', true); }
      }
    });

    /* ----------------------------------------------
       Quick keyboard focus for vanity ("/" key)
       ---------------------------------------------- */
    window.addEventListener('keydown', (e) => {
      if(e.key === '/' && document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA'){
        e.preventDefault();
        vanityInput.focus();
        vanityInput.select();
      }
      if(e.key === 'Escape'){
        closeModal();
      }
    });

    /* ----------------------------------------------
       Modal open/close
       ---------------------------------------------- */
    openModal.addEventListener('click', () => {
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden', 'false');
      modalInput.value = vanityInput.value || '';
      setTimeout(()=>modalInput.focus(), 80);
    });
    modalClose.addEventListener('click', closeModal);

    function closeModal(){
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden', 'true');
    }

    modalClaim.addEventListener('click', ()=>{
      const v = sanitizeUsername(modalInput.value.trim());
      if(!v){ flashMessage('Enter a name', true); return; }
      vanityInput.value = v; updateVanityPreview(); flashMessage(`Claimed ${v} (mock)`);
      closeModal();
    });

    /* ----------------------------------------------
       Small toast flash messages (non-intrusive)
       ---------------------------------------------- */
    let toastTimeout;
    function flashMessage(msg, isError){
      clearTimeout(toastTimeout);
      let t = document.getElementById('grief-toast');
      if(!t){
        t = document.createElement('div');
        t.id = 'grief-toast';
        t.style.position = 'fixed';
        t.style.left = '50%';
        t.style.bottom = '36px';
        t.style.transform = 'translateX(-50%)';
        t.style.padding = '10px 14px';
        t.style.borderRadius = '10px';
        t.style.background = 'linear-gradient(90deg, rgba(255,255,255,0.03), transparent)';
        t.style.border = '1px solid rgba(255,255,255,0.04)';
        t.style.boxShadow = '0 8px 34px rgba(2,6,23,0.6)';
        t.style.zIndex = 120;
        t.style.color = 'var(--text)';
        t.style.fontWeight = 700;
        document.body.appendChild(t);
      }
      t.textContent = msg;
      t.style.opacity = 1;
      t.style.transition = 'opacity .4s ease';
      if(isError) t.style.border = '1px solid var(--accent3)';
      toastTimeout = setTimeout(()=>{ t.style.opacity = 0; }, 2400);
    }

    /* ----------------------------------------------
       Tiny sound system (optional)
       ---------------------------------------------- */
    let soundOn = false;
    const audioCtx = (window.AudioContext || window.webkitAudioContext) ? new (window.AudioContext || window.webkitAudioContext)() : null;
    function playTone(freq=220, duration=0.08){
      if(!audioCtx || !soundOn) return;
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type = 'sine';
      o.frequency.value = freq;
      g.gain.value = 0.0001;
      o.connect(g); g.connect(audioCtx.destination);
      const now = audioCtx.currentTime;
      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(0.08, now + 0.01);
      o.start(now);
      g.gain.exponentialRampToValueAtTime(0.0001, now + duration);
      o.stop(now + duration + 0.02);
    }

    document.getElementById('playTone').addEventListener('click', ()=>{
      playTone(260,0.12);
    });

    themeBtn.addEventListener('click', ()=>{
      soundOn = !soundOn;
      themeBtn.style.opacity = soundOn ? 1 : 0.75;
      flashMessage(soundOn ? 'Sound ON' : 'Sound OFF');
      themeBtn.setAttribute('aria-pressed', String(soundOn));
    });

    /* ----------------------------------------------
       Simple animated particles using canvas
       ---------------------------------------------- */
    (function createParticles(){
      const svg = document.querySelector('.particles');
      const W = window.innerWidth, H = window.innerHeight;
      const num = Math.round((W * H) / 14000); // proportional
      const ns = [];
      for(let i=0;i<num;i++){
        ns.push({x: Math.random()*W, y: Math.random()*H, r: Math.random()*1.8+0.6, s: (Math.random()*0.8+0.2)});
      }
      // draw using small circles appended to svg
      ns.forEach((n, idx) => {
        const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
        c.setAttribute('cx', n.x);
        c.setAttribute('cy', n.y);
        c.setAttribute('r', n.r);
        c.setAttribute('fill','url(#g1)');
        c.setAttribute('opacity', 0.07 + Math.random()*0.12);
        svg.appendChild(c);
        n.el = c;
      });

      // animate subtle drift
      function tick(){
        ns.forEach(n=>{
          n.x += Math.sin((Date.now()/10000) * (n.s*20)) * 0.4;
          n.y += Math.cos((Date.now()/12000) * (n.s*30)) * 0.4;
          if(n.el){ n.el.setAttribute('cx', n.x); n.el.setAttribute('cy', n.y); }
        });
        requestAnimationFrame(tick);
      }
      tick();
    })();

    /* ----------------------------------------------
       floating blob subtle motion
       ---------------------------------------------- */
    (function floatBlobs(){
      const b1 = document.querySelector('.blob.one');
      const b2 = document.querySelector('.blob.two');
      let t = 0;
      function f(){
        t += 0.006;
        const x1 = Math.sin(t*0.8) * 18;
        const y1 = Math.cos(t*0.76) * 12;
        const x2 = Math.cos(t*0.94) * 12;
        const y2 = Math.sin(t*0.86) * 10;
        if(b1) b1.style.transform = `translate3d(${x1}px, ${y1}px, 0)`;
        if(b2) b2.style.transform = `translate3d(${x2}px, ${y2}px, 0)`;
        requestAnimationFrame(f);
      }
      f();
    })();

    /* ----------------------------------------------
       Small onboarding script: set placeholder & accessibility
       ---------------------------------------------- */
    document.addEventListener('DOMContentLoaded', ()=>{
      updateVanityPreview();
      // nice warm entrance animation
      document.querySelectorAll('.card, .left').forEach((el, idx)=>{
        el.animate([{opacity:0, transform:'translateY(18px)'},{opacity:1,transform:'translateY(0)'}],{duration:560,delay:120*idx,easing:'cubic-bezier(.2,.9,.3,1)'});
      });
    });

    /* ----------------------------------------------
       small utility: copy sample link on page load test (for demo)
       ---------------------------------------------- */
    // not triggered automatically, user must click

    /* ----------------------------------------------
       small helper for customizing (demo)
       ---------------------------------------------- */
    customizeBtn.addEventListener('click', ()=>{
      flashMessage('Customize opens admin in a real build (mock).');
      playTone(320,0.08);
    });

    /* ----------------------------------------------
       Small accessibility: focus visible style
       ---------------------------------------------- */
    (function focusIndicator(){
      const style = document.createElement('style');
      style.innerHTML = ':focus{outline:2px solid rgba(124,58,237,0.18);outline-offset:2px;border-radius:6px}';
      document.head.appendChild(style);
    })();

    /* ----------------------------------------------
       final: small easter egg - Konami detection (fun)
       ---------------------------------------------- */
    (function easterEgg(){
      const code = [38,38,40,40,37,39,37,39,66,65]; // konami
      let idx=0;
      window.addEventListener('keydown', e=>{
        if(e.keyCode===code[idx]){ idx++; if(idx===code.length){ idx=0; secret(); } } else idx=0;
      });
      function secret(){
        flashMessage('ghost mode enabled — enjoy the void');
        document.body.animate([{filter:'hue-rotate(0deg)'},{filter:'hue-rotate(220deg)'}],{duration:2200});
        playTone(520,0.12);
      }
    })();

  </script>
</body>
</html>
